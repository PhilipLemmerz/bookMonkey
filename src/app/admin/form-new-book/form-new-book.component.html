<section>
  <h1 i18n="@@form:headline"> Neues Buch hinzufügen - Template Driven </h1>

  <form #createBookForm="ngForm" (ngSubmit)="submit()">
    <div class="ui form">
      <div class="two fields">
        <div class="field"
          [class.error]="titleInput.invalid && titleInput.touched || formValid==false && titleInput.invalid ">
          <label i18n="@@form:booktitle">Buchtitel</label>
          <input type="text" name="title" i18n-placeholder="form:booktitleplaceholder" placeholder="Angular lernen"
            [(ngModel)]="book.title" required #titleInput="ngModel">
        </div>
        <div class="field">
          <label i18n="@@form:subtitle">Untertitel</label>
          <input type="text" name="subtile" placeholder="das Praxishandbuch"
            i18n-placeholder="@@form:subtitleplaceholder" [(ngModel)]="book.subtitle">
        </div>
      </div>
    </div>

    <div class="ui form">
      <div class="two fields">
        <div class="field"
          [class.error]="authorInput.invalid && authorInput.touched || formValid==false && authorInput.invalid">
          <label i18n="@@form:author">Autor</label>
          <input type="text" name="author" i18n-placeholder="@@form:authorplaceholder" placeholder="Max Mustermann"
            [(ngModel)]="book.authors[0]" required #authorInput="ngModel">
        </div>
        <div class="field"
          [class.error]="isbnInput.invalid && isbnInput.touched || formValid==false && isbnInput.invalid">
          <label i18n="@@form:isbn">Isbn Code</label>
          <input type="text" name="isbn" i18n-placeholder="@@form:isbnplaceholder" placeholder="123456789"
            [(ngModel)]="book.isbn" minlength="13" maxlength="13" pattern="[0-9]+" #isbnInput="ngModel" required>
        </div>
        <div *ngIf="isbnInput.invalid && isbnInput.touched" class="ui left pointing label" i18n="@@form:infoIsbn">
          Bitte gebe 13 Ziffern ein
        </div>
      </div>
    </div>

    <div class="ui form">
      <div class="two fields">
        <div class="field"
          [class.error]="dateInput.invalid && dateInput.touched || formValid==false && dateInput.invalid">
          <label i18n="@@form:published">Datum der Veröffentlichung</label>
          <input type="date" useValueAsDate name="published" i18n-placeholder="@@form:bublishedplaceholder"
            placeholder="22.02.1997" [(ngModel)]="book.published" #dateInput="ngModel" required>
        </div>
        <div class="field"
          [class.error]="ratingInput.invalid && ratingInput.touched || formValid==false && ratingInput.invalid">
          <label i18n="@@form:rating">Bewertung</label>
          <input type="text" name="rating" i18n-placeholder="@@form:ratingplaceholder" placeholder="3"
            [(ngModel)]="book.rating" maxlength="1" pattern="[0-5]" #ratingInput="ngModel">
        </div>
      </div>
    </div>

    <div class="ui form">
      <p i18n="@@form:addCoverImg"> Cover Bild hinzufügen:</p>
      <div class="two fields">
        <div class="field" [class.error]="urlInput.invalid && urlInput.touched || formValid==false && urlInput.invalid">
          <label i18n="@@form:imgurl">URL (Bildlink)</label>
          <input type="text" name="imgurl" i18n-placeholder="@@form:imgurlplaceholder"
            placeholder="https://learnangular/titleimage.com" [(ngModel)]="book.thumbnails[0].url" #urlInput="ngModel"
            required>
        </div>
        <div class="field">
          <label i18n="@@form:imgTitle">Bildtitel </label>
          <input type="text" name="imgtitle" i18n-placeholder="@@form:imgTitleplaceholder"
            placeholder="Coverbild Angular lernen" [(ngModel)]="book.thumbnails[0].title">
        </div>
      </div>
    </div>

    <div class="ui form">
      <div class="field">
        <label i18n="@@form:description">Buchbeschreibung</label>
        <textarea name="description" [(ngModel)]="book.description"> </textarea>
      </div>
    </div>

    <br>

    <button class="ui button" type="submit" i18n="@@form:buttonAdd"> Buch hinzufügen </button>

    <br>

    <div *ngIf="!formValid" class="ui error message">
      <div class="header" i18n="@@form:unvalidEntry">Ungültige Eingaben</div>
      <p i18n="@@form:formNotValid">Das Formular wurde nicht richtig ausgefüllt</p>
    </div>
  </form>

</section>